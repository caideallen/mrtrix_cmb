ml mamba
source activate myENV
cd /scratch/cbayouth/group/

#Everything below a certain point didnt work, heres what did

# take the ROI I drew in mrveiw, in voxel space, and put it in fixel space
voxel2fixel ROI_first_try.mif fd_smooth fd_smooth ROI_fixel.mif
mkdir fdtxt_mean
mkdir fdtxt_median
mkdir fdtxt_std

# try2
voxel2fixel ROI_try2.mif fd_smooth fd_smooth ROI_fixel_2.mif
mkdir fdtxt_mean_2
mkdir fdtxt_median_2
mkdir fdtxt_std_2

# get the info in a text file
for ID in $(seq 10002 10150) $(seq 11001 11107); do
mrstats -output mean -mask fd_smooth/ROI_fixel_2.mif fd_smooth/${ID}.mif > fdtxt_mean_2/${ID}_stats.txt
mrstats -output median -mask fd_smooth/ROI_fixel_2.mif fd_smooth/${ID}.mif > fdtxt_median_2/${ID}_stats.txt 
mrstats -output std -mask fd_smooth/ROI_fixel_2.mif fd_smooth/${ID}.mif > fdtxt_std_2/${ID}_stats.txt
done
for ID in $(seq 10002 10150) $(seq 11001 11107); do
mrstats -output count -mask fd_smooth/ROI_fixel_2.mif fd_smooth/${ID}.mif > counts/${ID}_stats.txt
done

cat fdtxt_mean_2/* > fdtxt_mean_2.txt
cat fdtxt_median_2/* > fdtxt_median_2.txt
cat fdtxt_std_2/* > fdtxt_std_2.txt

# figure out how many fixels are in each dealio
mkdir counts
fixel2voxel  -mask fd_smooth/ROI_fixel_2.mif fd_smooth/10002.mif count counts/10002.mif










### This was all fucky
# Create mask based off areas of significance
mrthreshold stats_fd_agecov/fwe_1mpvalue_t2.mif significance_mask.mif -abs 0.95

# Look to see if it worked. try overlay.load image [image] if this is fucky
mrview wmfod_template.mif -overlay.load significance_mask.mif
## using tckedit to get streamlines only within the roi mask
tckedit in.tck out.tck -include ROI1.mif -include ROI2.mif -minlength 25

## or 
mrdump -mask ROI_first_try.mif fd_smooth/10002.mif 10002_stats.txt

## Okay so I need a tck image. Or shit lets try to get out roi mask into fixel space
voxel2fixel ROI_first_try.mif fd_smooth fd_smooth ROI_fixel.mif
